<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,viewport-fit=cover" />
  <title>Simulador TikTok (3 embeds)</title>
  <style>
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:#000;color:#fff;font-family:system-ui,Arial}
    .feed{height:100vh;overflow:auto;scroll-snap-type:y mandatory;scrollbar-width:none}
    .feed::-webkit-scrollbar{display:none}
    .item{display:flex;justify-content:center;align-items:center;height:100vh;scroll-snap-align:start;padding:0 10px}
    .wrap{width:100%;max-width:500px;margin:0 auto}
    .stack-right{position:fixed;right:12px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:14px}
    .bigbtn{width:64px;height:64px;border-radius:999px;border:none;cursor:pointer;background:#ffffff2a;color:#fff;font-size:28px;backdrop-filter: blur(6px)}
    .bigbtn:active{transform:scale(.98)}
    .gate{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:#000;z-index:10}
    .gate button{font-size:1rem;padding:.9rem 1.2rem;border-radius:999px;border:0;background:#fff;color:#000;cursor:pointer}
  </style>
</head>
<body>
  <!-- Gate para primer toque en móvil -->
  <div class="gate" id="gate">
    <button id="start">▶️ Iniciar</button>
  </div>

  <div class="feed" id="feed">
    <!-- TikTok 1 -->
    <section class="item">
      <div class="wrap">
        <blockquote class="tiktok-embed" cite="https://vm.tiktok.com/ZMA61uufF/" style="background:#000">
          <section><a href="https://vm.tiktok.com/ZMA61uufF/">TikTok 1</a></section>
        </blockquote>
      </div>
    </section>

    <!-- TikTok 2 -->
    <section class="item">
      <div class="wrap">
        <blockquote class="tiktok-embed" cite="https://vm.tiktok.com/ZMA613KNM/" style="background:#000">
          <section><a href="https://vm.tiktok.com/ZMA613KNM/">TikTok 2</a></section>
        </blockquote>
      </div>
    </section>

    <!-- TikTok 3 (agregado) -->
    <section class="item">
      <div class="wrap">
        <!-- Reemplazá esta URL con el link del tercer TikTok -->
        <blockquote class="tiktok-embed" cite="https://vm.tiktok.com/ZMA61XXXX/" style="background:#000">
          <section><a href="https://vm.tiktok.com/ZMA61XXXX/">TikTok 3</a></section>
        </blockquote>
      </div>
    </section>
  </div>

  <!-- Botones arriba/abajo -->
  <div class="stack-right">
    <button class="bigbtn" id="btnPrev" aria-label="Anterior">⬆️</button>
    <button class="bigbtn" id="btnNext" aria-label="Siguiente">⬇️</button>
  </div>

  <!-- SDK oficial de TikTok -->
  <script async src="https://www.tiktok.com/embed.js"></script>

  <script>
    const sections = Array.from(document.querySelectorAll('.item'));
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');
    const gate = document.getElementById('gate');
    let current = 0;

    function go(i){
      if (i<0) i=0;
      if (i>=sections.length) i=sections.length-1;
      current = i;
      sections[i].scrollIntoView({behavior:'smooth', block:'start'});
    }

    // Swipe vertical
    let startY=0,startX=0,moved=false;
    window.addEventListener('touchstart',e=>{
      const t=e.touches[0]; startY=t.clientY; startX=t.clientX; moved=false;
    },{passive:true});
    window.addEventListener('touchmove',()=>{moved=true;},{passive:true});
    window.addEventListener('touchend',e=>{
      if(!moved) return;
      const t=e.changedTouches[0]; const dy=t.clientY-startY, dx=t.clientX-startX;
      if(Math.abs(dy)>Math.abs(dx) && Math.abs(dy)>40){ dy<0?go(current+1):go(current-1); }
    },{passive:true});

    btnPrev.onclick=()=>go(current-1);
    btnNext.onclick=()=>go(current+1);

    document.getElementById('start').onclick=()=>{
      gate.style.display='none';
    };

    // Observador para actualizar el índice actual
    const io=new IntersectionObserver(entries=>{
      entries.forEach(e=>{
        if(e.isIntersecting){ current=sections.findIndex(s=>s===e.target); }
      });
    },{threshold:0.6});
    sections.forEach(s=>io.observe(s));
  </script>
</body>
</html>
